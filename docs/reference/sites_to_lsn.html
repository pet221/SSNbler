<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Snap sites to edges in a Landscape Network — sites_to_lsn • SSNbler</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Snap sites to edges in a Landscape Network — sites_to_lsn"><meta property="og:description" content="Incorporates an sf object containing features
with POINT geometry into a landscape network (LSN), which is a
topological data model of streams/rivers represented as a
directional graph embedded in 2-D geographic space. Point
locations are 'snapped' to the closest edge location and new
information is generated describing the geographic and
topological location relative to other features in the LSN."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SSNbler</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/introduction.html">An Introduction to SSNbler: Assembling Spatial Stream Network (SSN) Objects in R</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/pet221/SSNbler/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Snap sites to edges in a Landscape Network</h1>
    <small class="dont-index">Source: <a href="https://github.com/pet221/SSNbler/blob/HEAD/R/sites_to_lsn.R" class="external-link"><code>R/sites_to_lsn.R</code></a></small>
    <div class="hidden name"><code>sites_to_lsn.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Incorporates an <code>sf</code> object containing features
with POINT geometry into a landscape network (LSN), which is a
topological data model of streams/rivers represented as a
directional graph embedded in 2-D geographic space. Point
locations are 'snapped' to the closest edge location and new
information is generated describing the geographic and
topological location relative to other features in the LSN.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sites_to_lsn</span><span class="op">(</span></span>
<span>  <span class="va">sites</span>,</span>
<span>  <span class="va">edges</span>,</span>
<span>  <span class="va">snap_tolerance</span>,</span>
<span>  save_local <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lsn_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  file_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>sites</dt>
<dd><p>An <code>sf</code> object with POINT geometery, typically
representing observed data or prediction locations.</p></dd>


<dt>edges</dt>
<dd><p>An <code>sf</code> object with LINESTING geometry created
using <code><a href="lines_to_lsn.html">lines_to_lsn</a></code>.</p></dd>


<dt>snap_tolerance</dt>
<dd><p>Numeric distance in map units &gt;= 0. Sites that
are &lt;= this distance from an edge feature will snapped to the
closest location on the edge. When the distance between the site
and all edges is &gt; <code>snap_tolerance</code>, the point feature is not
snapped or included in the lsn_path.</p></dd>


<dt>save_local</dt>
<dd><p>Logical indicating whether the outputs should be
saved to a local directory in geopackage format. Defaults to
<code>TRUE</code>.</p></dd>


<dt>lsn_path</dt>
<dd><p>Pathname to the LSN. This is typically a directory created by
<code><a href="lines_to_lsn.html">lines_to_lsn</a></code>. Required if <code>save_local = TRUE</code>.</p></dd>


<dt>file_name</dt>
<dd><p>Filename for output sites, which are saved to <code>lsn_path</code>
in geopackage format (must include the .gpkg extension).</p></dd>


<dt>overwrite</dt>
<dd><p>Logical indicating whether the outputs saved to
<code>lsn_path</code> should overwrite existing files if they
exist. Defaults to <code>FALSE</code>.</p></dd>


<dt>verbose</dt>
<dd><p>Logical indicating whether progress messages should
be printed to the console. Defaults to <code>TRUE</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An <code>sf</code> object with POINT geometry containing the
features from <code>sites</code> that were found within the
<code>snap_tolerance</code> distance to the closest edge. In addition to
the original columns in <code>sites</code>, three new columns are
added: rid, ratio, and snapdist (see Details). If
<code>save_local = TRUE</code>, the <code>sf</code> object is also saved to
<code>lsn_path</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>sites_to_lsn</code> function is used to incorporate
observed and prediction sites into the LSN. The output is an
<code>sf</code> object with POINT geometry, which contains only the
point features from <code>sites</code> that were found less than the
<code>snap_tolerance</code> distance from the closest edge
feature. When an <code>sites</code> point feature meets these
requirements, it is moved (i.e. snapped) to the closest location
on an edge feature. Three new columns are also added: rid, ratio,
and snapdist. The rid column contains the rid for the edge the
site has been snapped to. The second column, ratio,
represents the proportional length of the edge found between the
downstream end node for the edge and the updated/snapped site
location. The snapdist is the distance in map units that the site
was moved. If the distance between a point feature and the
closest edge is greater than or equal to the
<code>snap_tolerance</code>, the feature is not included in the output.</p>
<p>The <code>snap_tolerance</code> must always be &gt;= 0 and must be large
enough to snap all of the point features to the edges. Using
<code>snap_tolerance = 0</code> is not recommended, even when the
<code>sites</code> features intersect the edge features. Instead, a
very small <code>snap_tolerance</code> value is recommended to ensure
that differences in the precision of the x and y coordinates and
the line location do not result in unsnapped point features.</p>
<p>Note that the <code>sites</code> and <code>edges</code>
must have the same projection.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Erin Peterson, Michael Dumelle, Alan Pearse.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

